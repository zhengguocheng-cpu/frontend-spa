# Frontend vs Frontend-SPA 功能对照表

## 🎯 项目目标
**将 frontend（多页面）迁移到 frontend-spa（单页面），解决 Socket 多连接问题**

---

## 📋 Frontend 功能清单

### 1. 登录页面 (login/)
**功能**：
- [x] 用户名输入
- [x] 头像选择
- [x] Socket 连接
- [x] 登录验证
- [x] 跳转到大厅

**Frontend-SPA 状态**：✅ 已完成

---

### 2. 游戏大厅 (lobby/)
**功能**：
- [x] 显示房间列表
- [x] 实时更新房间状态
- [x] 刷新房间列表
- [x] 快速加入房间
- [x] 查看我的房间
- [x] 显示用户信息
- [x] 连接状态显示
- [x] 退出登录

**Frontend-SPA 状态**：✅ 已完成（刚修复）

---

### 3. 游戏房间 (room/)
**功能**：
- [ ] 房间信息显示
- [ ] 玩家列表
- [ ] 准备/取消准备
- [ ] 游戏开始
- [ ] 叫地主
- [ ] 出牌
- [ ] 提示功能
- [ ] 聊天功能
- [ ] 音效播放
- [ ] 动画效果
- [ ] 游戏结算
- [ ] 返回大厅

**Frontend-SPA 状态**：❌ 未实现

---

### 4. 个人中心 (profile/)
**功能**：
- [ ] 显示用户信息
- [ ] 游戏统计
- [ ] 战绩记录
- [ ] 修改头像
- [ ] 返回大厅

**Frontend-SPA 状态**：❌ 未实现

---

### 5. 排行榜 (leaderboard/)
**功能**：
- [ ] 显示排行榜
- [ ] 胜率排序
- [ ] 场次排序
- [ ] 返回大厅

**Frontend-SPA 状态**：❌ 未实现

---

### 6. 结算页面 (settlement/)
**功能**：
- [ ] 显示游戏结果
- [ ] 显示得分
- [ ] 显示玩家表现
- [ ] 返回大厅
- [ ] 再来一局

**Frontend-SPA 状态**：❌ 未实现

---

### 7. 反馈页面 (feedback/)
**功能**：
- [ ] 提交反馈
- [ ] 返回大厅

**Frontend-SPA 状态**：❌ 未实现

---

## 🔄 核心差异

### Frontend (多页面)
```
每个页面独立的 HTML 文件
每个页面独立的 Socket 连接 ❌
页面切换需要重新加载 ❌
状态不共享 ❌
```

### Frontend-SPA (单页面)
```
单个 HTML，React 路由
全局共享的 Socket 连接 ✅
页面切换无需重新加载 ✅
Redux 全局状态管理 ✅
```

---

## 📊 实现进度

### 总体进度
```
✅ 已完成：2/7 (29%)
⏳ 进行中：0/7 (0%)
❌ 未开始：5/7 (71%)
```

### 优先级排序

#### P0 - 核心功能（必须）
1. ✅ Login - 登录页面
2. ✅ Lobby - 游戏大厅
3. ❌ Room - 游戏房间（**最重要，下一步**）
4. ❌ Settlement - 结算页面

#### P1 - 重要功能
5. ❌ Profile - 个人中心
6. ❌ Leaderboard - 排行榜

#### P2 - 辅助功能
7. ❌ Feedback - 反馈页面

---

## 🎮 下一步：实现游戏房间

### 参考文件
```
frontend/public/room/index.html
frontend/public/room/js/room.js
frontend/public/room/css/room.css
```

### 需要实现的核心功能
1. **房间状态管理**
   - 使用 Redux gameSlice
   - 房间信息、玩家列表、游戏状态

2. **游戏逻辑**
   - 准备系统
   - 叫地主
   - 出牌逻辑
   - 提示功能

3. **UI 组件**
   - 使用 antd-mobile
   - 移动端友好
   - 触摸操作

4. **Socket 事件**
   - 复用全局 Socket
   - 监听游戏事件
   - 发送游戏操作

---

## 💡 实现策略

### 1. 参考 Frontend 实现
- 查看 `frontend/public/room/js/room.js`
- 理解所有 Socket 事件
- 理解游戏状态流转

### 2. 使用 Redux 管理状态
- 已有 `gameSlice.ts`
- 所有状态存储在 Redux
- 组件只负责展示和交互

### 3. 移动端优化
- 使用 antd-mobile 组件
- 触摸友好的交互
- 响应式布局

### 4. 复用全局 Socket
- 不创建新连接
- 使用 `globalSocket`
- 正确清理监听器

---

## 🧪 测试计划

### 当前已测试
- ✅ 登录功能
- ✅ Socket 单连接
- ✅ 房间列表显示
- ✅ 状态保持

### 待测试
- [ ] 游戏房间完整流程
- [ ] 多人游戏
- [ ] 断线重连
- [ ] 移动端体验
- [ ] 性能测试

---

## 📝 注意事项

### 必须保持的特性
1. **Socket 单连接**
   - 全局只有一个 Socket 实例
   - 页面切换不断开连接

2. **状态共享**
   - Redux 全局状态
   - 页面间数据共享

3. **功能完整性**
   - 所有 frontend 功能都要实现
   - 不能遗漏任何特性

4. **移动端优先**
   - 使用 antd-mobile
   - 触摸友好
   - 响应式设计

---

## 🎯 当前任务

**现在应该做什么？**

1. ✅ 确认登录和大厅功能正常
2. 🔄 开始实现游戏房间页面
3. ⏳ 参考 `frontend/public/room/` 的实现
4. ⏳ 使用 Redux gameSlice 管理状态
5. ⏳ 使用 antd-mobile 构建 UI

---

**准备好开始实现游戏房间了吗？** 🚀
